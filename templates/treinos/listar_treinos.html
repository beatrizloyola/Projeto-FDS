{% extends "base.html" %}
{% load static %}

{% block content %}

<script id="exercicios-options-template" type="text/template">
    {% for exercicio in exercicios %}
        <option value="{{ exercicio.id }}">{{ exercicio.nome }}</option>
    {% endfor %}
</script>

<div class="treinos-board-wrapper">
    {% if treinos %}
    <div class="treinos-board" id="treinosBoard" data-exercicios-url="{% url 'criar_treino' %}">
                {% for treino in treinos %}
                    <div class="treino-card {% if treino.id in treinos_feitos_hoje %}done{% endif %}" data-treino-id="{{ treino.id }}">
                        <h4 class="treino-title" data-edit-inline="1">{{ treino.nome }}</h4>
                        <div class="exercise-wrapper">
                            {% if treino.itens.all %}
                                {% for item in treino.itens.all %}
                                <div class="exercise-form readonly" data-exercicio-id="{{ item.exercicio.id }}" data-carga="{{ item.carga }}" data-repeticoes="{{ item.repeticoes }}" data-descanso="{{ item.descanso }}">
                                    <div style="font-size:12px; font-weight:600;">ExercÃ­cio {{ forloop.counter }}:</div>
                                    <div>{{ item.exercicio.nome }}</div>
                                    <div>Carga: {{ item.carga }} kg</div>
                                    <div>RepetiÃ§Ãµes: {{ item.repeticoes }}</div>
                                    <div>Descanso: {{ item.descanso }} s</div>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="placeholder-msg">Sem exercÃ­cios ainda.</div>
                            {% endif %}
                        </div>
                        <div class="treino-actions">
                            <button type="button" class="edit-box" data-inline-edit title="Editar treino">âœŽ</button>
                            <form method="post" action="{% url 'concluir_treino' treino.id %}" class="inline-form">
                                {% csrf_token %}
                                <button type="submit" class="finish-box {% if treino.id in treinos_feitos_hoje %}done{% endif %}" title="Marcar como concluÃ­do">âœ“</button>
                            </form>
                            <form method="post" action="{% url 'excluir_treino' treino.id %}" class="inline-form" onsubmit="return confirm('Tem certeza que deseja excluir este treino?');">
                                {% csrf_token %}
                                <button type="submit" class="delete-box" title="Excluir treino">ðŸ—‘</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
    </div>
        <div class="new-treino-bar">
            <div class="new-treino-btn" id="btnNovoTreinoInline" data-new-inline title="Criar novo treino">+</div>
        </div>
    {% else %}
    <div class="empty-board">
        <div class="add-first" onclick="window.location.href='{% url 'criar_treino' %}'" title="Criar primeiro treino">+</div>
    </div>
    {% endif %}
</div>

{% endblock %}

{% block extra_scripts %}
<script src="{% static 'js/treinos_inline.js' %}"></script>
{% endblock %}
